{
    "sourceFile": "lib/features/connection/presentation/screens/login_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1742130466297,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1742131774648,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,18 @@\n                                 password: _passwordController.text,\r\n                               );\r\n                               \r\n                               if (viewModel.errorMessage.isEmpty) {\r\n-                                // Navigate to courses screen\r\n+                                Navigator.pushReplacement(\r\n+                                  context,\r\n+                                  MaterialPageRoute(\r\n+                                    builder: (_) => WebViewScreen(\r\n+                                      baseUrl: widget.baseUrl,\r\n+                                      username: _usernameController.text,\r\n+                                      password: _passwordController.text,\r\n+                                    ),\r\n+                                  ),\r\n+                                );\r\n                               }\r\n                             }\r\n                           },\r\n                     child: const Text('Login'),\r\n"
                },
                {
                    "date": 1742131929967,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+import 'package:aybudle/features/connection/presentation/screens/webview_screen.dart';\r\n import 'package:flutter/material.dart';\r\n import 'package:provider/provider.dart';\r\n import '../view_models/login_view_model.dart';\r\n \r\n"
                }
            ],
            "date": 1742130466297,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport 'package:provider/provider.dart';\r\nimport '../view_models/login_view_model.dart';\r\n\r\nclass LoginScreen extends StatefulWidget {\r\n  final String baseUrl;\r\n\r\n  const LoginScreen({super.key, required this.baseUrl});\r\n\r\n  @override\r\n  _LoginScreenState createState() => _LoginScreenState();\r\n}\r\n\r\nclass _LoginScreenState extends State<LoginScreen> {\r\n  final _formKey = GlobalKey<FormState>();\r\n  final _usernameController = TextEditingController();\r\n  final _passwordController = TextEditingController();\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(title: const Text('Moodle Login')),\r\n      body: Padding(\r\n        padding: const EdgeInsets.all(16.0),\r\n        child: Consumer<LoginViewModel>(\r\n          builder: (context, viewModel, _) {\r\n            return Form(\r\n              key: _formKey,\r\n              child: Column(\r\n                children: [\r\n                  TextFormField(\r\n                    controller: _usernameController,\r\n                    decoration: const InputDecoration(\r\n                      labelText: 'Username',\r\n                      border: OutlineInputBorder(),\r\n                    ),\r\n                    validator: (value) => value?.isEmpty ?? true ? 'Required' : null,\r\n                  ),\r\n                  const SizedBox(height: 20),\r\n                  TextFormField(\r\n                    controller: _passwordController,\r\n                    obscureText: true,\r\n                    decoration: const InputDecoration(\r\n                      labelText: 'Password',\r\n                      border: OutlineInputBorder(),\r\n                    ),\r\n                    validator: (value) => value?.isEmpty ?? true ? 'Required' : null,\r\n                  ),\r\n                  const SizedBox(height: 20),\r\n                  if (viewModel.errorMessage.isNotEmpty)\r\n                    Text(\r\n                      viewModel.errorMessage,\r\n                      style: const TextStyle(color: Colors.red),\r\n                    ),\r\n                  const SizedBox(height: 20),\r\n                  ElevatedButton(\r\n                    onPressed: viewModel.isLoading\r\n                        ? null\r\n                        : () async {\r\n                            if (_formKey.currentState?.validate() ?? false) {\r\n                              await viewModel.login(\r\n                                baseUrl: widget.baseUrl,\r\n                                username: _usernameController.text,\r\n                                password: _passwordController.text,\r\n                              );\r\n                              \r\n                              if (viewModel.errorMessage.isEmpty) {\r\n                                // Navigate to courses screen\r\n                              }\r\n                            }\r\n                          },\r\n                    child: const Text('Login'),\r\n                  ),\r\n                  if (viewModel.isLoading)\r\n                    const Padding(\r\n                      padding: EdgeInsets.all(8.0),\r\n                      child: CircularProgressIndicator(),\r\n                    ),\r\n                ],\r\n              ),\r\n            );\r\n          },\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}"
        }
    ]
}